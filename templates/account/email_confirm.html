{% extends "base/base.html" %}
{% load static %}

{% load i18n %}
{% block headercss %}
<link rel="stylesheet" href="{% static 'tfcss/glide.core.css' %}" />
<link rel="stylesheet" href="{% static 'tfcss/glide.theme.css' %}" />
<link rel="stylesheet" href="{% static 'tfcss/slider/slick-theme.css' %}" />
<link rel="stylesheet" href="{% static 'tfcss/slider/slick.css' %}" />
<link rel="stylesheet" href="{% static 'tfcss/style.css' %}" />
{% endblock headercss %}

{% load i18n %}
{% load account %}

{% block head_title %}{% trans "Confirm E-mail Address" %}{% endblock %}


{% block content %}
<div class="container py-5 my-5 bg-light">
    <h1>{% trans "Confirmation E-mail Address" %}</h1>

    {% if confirmation %}
    
    {% user_display confirmation.email_address.user as user_display %}
    
    <p>{% blocktrans with confirmation.email_address.email as email %}Thank You for confirming <a href="mailto:{{ email }}">{{ email }}</a> is an e-mail address for user {{ user_display }}.{% endblocktrans %}</p>
    
    <form id="confirm-form" method="post" action="{% url 'account_confirm_email' confirmation.key %}">
    {% csrf_token %}
    <div class="d-flex justify-content-center">
        <div class="mr-3" role="status">
        <h5>Please Wait</h5>
        </div>
        <div class="spinner-grow text-secondary" role="status">
        <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-secondary" role="status">
        <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-secondary" role="status">
        <span class="sr-only">Loading...</span>
        </div>
    </div>
        <button class="pro-save" type="submit">{% trans 'Confirm' %}</button>
    </form>
    
    {% else %}
    
    {% url 'account_email' as email_url %}
    
    <p>{% blocktrans %}This e-mail confirmation link expired or is invalid. Please <a href="{{ email_url }}">issue a new e-mail confirmation request</a>.{% endblocktrans %}</p>
    
    {% endif %}

</div>

<script>
let form= document.getElementById('confirm-form');
if(form){
    form.submit();
}
</script>


{% endblock %}
