{% extends 'base/bcs_user_base.html' %} {% load static %} {% load hosts %} {% block headercss %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css">
<style>
    .profile-details{
        margin-block: 1rem;
    }
    .company-img{
        /* border: 1px solid #000; */
        text-align: center;
        margin: 1rem;
    }
    .company-img img{
        width: 100px;
        height: 100px;
    }
</style>

{% endblock headercss %} {% block title %} My Team {% endblock title %} {% block content %}

<div class="team-container">
    <div class="company-profile">
        <div class="pt-3 border-bottom border-gray pb-2 align-items-center">
            <h3 class="fw-bold mb-0">Your Business Profifle</h3>
            <div class="profile-details row">
                <div class="col-md-3">
                    <div class="company-img">
                        <img src="{%static 'tfimg/user_panel/Techforing-Icon.png'%}" alt="">
                    </div>
                </div>
                <div class="col-md-9">
                    <div class="company-detail d-grid align-items-center">
                        <h4>ABC company</h4>
                        <p>www.website.com</p>
                        <p>company size: 10</p>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <section class="team-statistics mb-5">
        <div class="pt-3 border-bottom border-gray pb-2 d-flex justify-content-between align-items-center">
            <h4 class="fw-bold mb-0">Your team</h4>
            <button data-bs-toggle="modal" data-bs-target="#addNew" class="btn btn-lg bg-navy">
                <i class="fa fa-plus-circle"></i>
                Invite User</button>
        </div>
        <div class="d-flex py-5">
            <div class="col-md-4">
                <div class="card" style="width: 18rem;">
                    <div class="card-body">
                        <div class="card-title d-flex">
                            <img src="..." class="card-img-top" alt="...">
                            <h5>Card title</h5>
                        </div>
                      <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                      <a href="#" class="btn btn-primary">Go somewhere</a>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card" style="width: 18rem;">
                    <div class="card-body">
                        <div class="card-title d-flex">
                            <img src="..." class="card-img-top" alt="...">
                            <h5>Card title</h5>
                        </div>
                      <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                      <a href="#" class="btn btn-primary">Go somewhere</a>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card" style="width: 18rem;">
                    <div class="card-body">
                        <div class="card-title d-flex">
                            <img src="..." class="card-img-top" alt="...">
                            <h5>Card title</h5>
                        </div>
                      <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                      <a href="#" class="btn btn-primary">Go somewhere</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="addNew" tabindex="-1" aria-labelledby="trainingModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-xl">
                <div class="modal-content border-0 bg-main">
                    <div class="modal-header border-0">
                        <button type="button" class="btn-close rounded-circle bg-green" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body px-5 pb-5">
                        <h4 class="px-3 fw-bold text-center">INVITE USERS FOR TRAINING PROGRAM
                        </h4>
                        <h5 class="text-green text-center">You can invite 15(max.) colleagues as per quotation</h5>

                        <h5 class="mt-3">Email(Required):</h5>
                        <form action="/email_invitation/" method="post" onkeydown="return event.key != 'Enter';">
                            {% csrf_token %}
                            <div class="email-container d-flex flex-wrap justify-content-start align-items-start align-content-start border border-dark fs-7 p-2 h-200p">
                                <div class="email">
                                    <span>biyogafsana@gmail.com <span class="remove-email">&Cross;</span></span>
                                </div>
                                <div class="email">
                                    <span>salekin.techforing@gmail.com <span class="remove-email">&Cross;</span></span>
                                </div>
                                <div class="h-25p">
                                    <input autocomplete="off" class="email-input" maxlength="30" type="email" placeholder="Type an email">
                                    <button type="button" class="add-email btn p-0"><i
                                            class="icofont-plus-circle"></i></button>
                                </div>
                            </div>

                            <h6 class="mt-3 fw-bold">Set Level:</h6>
                            <div class="mt-2 d-flex flex-wrap flex-md-nowrap justify-content-between align-items-center">
                                <div class="form-check">
                                    <input required class="form-check-input" type="radio" name="level" id="level1" value="">
                                    <label class="form-check-label" for="level1">Standard</label>
                                </div>
                                <div class="form-check">
                                    <input required class="form-check-input" type="radio" name="level" id="level2" value="">
                                    <label class="form-check-label" for="level2">Administrator</label>
                                </div>

                                <select class="form-select w-50" aria-label="Default select example">
                                    <option selected disabled>Give Access To (Service)</option>
                                    <option value="1">Crime Investigation</option>
                                    <option value="2">Open Source Intelligence</option>
                                    <option value="3">Hack Recovery</option>
                                </select>
                            </div>
                            <button type="submit" class="mt-4 btn bg-navy p-1 px-3">INVITE</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- <section class="mt-3">
        <div class="row mx-0 shadow p-2">
            <div class="col-md-3">
                <h6 class="user">Total User
                    <br> 10
                </h6>
                <h6 class="pt-2 user">New User
                    <br> 2
                </h6>

                <h6 class="mt-3 fw-bold fs-6">My Team</h6>
                <div class="my-team-img d-flex">
                    <img class="img-logo" src="{%static ''%}tfimg/user_panel/anjelina.jpg" alt="">
                    <img class="img-logo" src="{%static ''%}tfimg/user_panel/anjelina.jpg" alt="">
                    <img class="img-logo" src="{%static ''%}tfimg/user_panel/anjelina.jpg" alt="">
                    <img class="img-logo" src="{%static ''%}tfimg/user_panel/anjelina.jpg" alt="">
                    <div class="img-logo bg-navy d-flex align-items-center justify-content-center">+15</div>
                </div>
            </div>
            <div class="col-md-9 mt-3 mt-md-0">
                <div class="user-chart-box">
                    <canvas id="user-chart" height="100"></canvas>
                </div>
            </div>
        </div>
    </section>

    <section class="mt-5">
        <table id="myTable" class="mt-5 table text-center border border-gray">
            <thead class="border border-gray">
                <tr class="fw-bold text-navy border border-gray">
                    <td>Name</td>
                    <td>Email</td>
                    <td>Status</td>
                    <td>Invited In</td>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Mr. Islam</td>
                    <td>islam@gmail.com</td>
                    <td>Active</td>
                    <td>Training Program</td>
                </tr>
                <tr>
                    <td>Neruz Afreen</td>
                    <td>neruz@gmail.com</td>
                    <td>Active</td>
                    <td>Training Program</td>
                </tr>
                <tr>
                    <td>Afsana Khan</td>
                    <td>afsana@gmail.com</td>
                    <td class="text-green">Invited</td>
                    <td>Training Program</td>
                </tr>
                <tr>
                    <td>Foyjul Islam</td>
                    <td>foyjul@gmail.com</td>
                    <td class="text-green">Invited</td>
                    <td>Training Program</td>
                </tr>
                <tr>
                    <td>Serajus Salekin</td>
                    <td>salekin@gmail.com</td>
                    <td class="text-green">Invited</td>
                    <td>Training Program</td>
                </tr>
                <tr>
                    <td>Mr. Araf</td>
                    <td>araf@gmail.com</td>
                    <td>Active</td>
                    <td>Training Program</td>
                </tr>
                <tr>
                    <td>Mr. Islam</td>
                    <td>islam@gmail.com</td>
                    <td class="text-green">Invited</td>
                    <td>Training Program</td>
                </tr>
                <tr>
                    <td>Neruz Afreen</td>
                    <td>neruz@gmail.com</td>
                    <td>Active</td>
                    <td>Training Program</td>
                </tr>
                <tr>
                    <td>Afsana Khan</td>
                    <td>afsana@gmail.com</td>
                    <td class="text-green">Invited</td>
                    <td>Training Program</td>
                </tr>
                <tr>
                    <td>Foyjul Islam</td>
                    <td>foyjul@gmail.com</td>
                    <td class="text-green">Invited</td>
                    <td>Training Program</td>
                </tr>
                <tr>
                    <td>Serajus Salekin</td>
                    <td>salekin@gmail.com</td>
                    <td class="text-green">Invited</td>
                    <td>Training Program</td>
                </tr>
                <tr>
                    <td>Mr. Araf</td>
                    <td>araf@gmail.com</td>
                    <td>Active</td>
                    <td>Training Program</td>
                </tr>
            </tbody>
        </table>
    </section> -->
</div>
{% endblock content %} {% block customjs %}

<script src="{%static ''%}tfjs/user_panel/team/chart.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>
<script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
<script>
    let emailInput = document.querySelector('.team-statistics .email-input');
    document.querySelector('.team-statistics .email-container').addEventListener('click', () => {
        emailInput.focus();
    });

    function ValidateEmail(email) {
        let validRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
        return email.match(validRegex) ? true : false;
    }

    let addEmail = (email) => {
        let allEmail = document.querySelectorAll('.email-container .email');

        if (ValidateEmail(email) && allEmail.length < 16) {
            let newEmail = `<div class="email">
                                        <span>${email} <span class="remove-email">&Cross;</span></span>
                                        </div>`;

            if (allEmail.length == 0) {
                emailInput.parentNode.insertAdjacentHTML('beforebegin', newEmail);
            } else {
                let lastEmail = allEmail[allEmail.length - 1];
                lastEmail.insertAdjacentHTML('afterend', newEmail);
            }

            emailInput.value = '';
            removeEmail();
        }
    }
    let removeEmail = () => {
        document.querySelectorAll('.email-container .remove-email').forEach(email => {
            email.addEventListener('click', e => {
                document.querySelector('.email-container').removeChild(e.target.parentNode.parentNode);
            });
        });
    }

    emailInput.addEventListener('keydown', (e) => {
        let email = e.target.value;
        if (e.key == 'Enter') {
            addEmail(email);
        }
    });
    emailInput.addEventListener('keyup', (e) => {
        if (e.key != 'Enter') {
            if (ValidateEmail(e.target.value)) {
                e.target.style.backgroundColor = '#28a745';
                e.target.style.color = 'white';
            } else {
                e.target.style.backgroundColor = '#dc3545';
                e.target.style.color = 'white';
            }
        } else {
            e.target.style.backgroundColor = 'white';
            e.target.style.color = 'black';
        }
    });
    document.querySelector('.email-container .add-email').addEventListener('click', e => {
        let newEmail = e.target.parentNode.parentNode.children[0];
        newEmail.style.backgroundColor = 'white';
        newEmail.style.color = 'black';
        addEmail(newEmail.value);
    });

    removeEmail();

    document.querySelectorAll('.my-team-img .img-logo').forEach((img, index) => {
        let value = `-${20 * index}px`;
        img.style.left = value;
    });

    $(document).ready(function() {
        $('#myTable').DataTable({
            responsive: true,
            "order": []
        });
    });
</script>
{% endblock customjs %}