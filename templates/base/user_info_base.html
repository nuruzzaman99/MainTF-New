<!DOCTYPE html> {% load static %} {% load hosts %}
<html lang="en">

<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/> {% block meta %} {% endblock meta %}
    <!-- CSS -->
    <link rel="stylesheet" href="{% static '' %}tfcss/icofont/icofont.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static '' %}tfcss/user_panel/pcs/style.css"/>
    <link id="tooltip" rel="stylesheet" href="https://npmcdn.com/tootik@1.0.2/css/tootik.min.css">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet"/>

    {% block headercss %} {% endblock headercss %}
    <title>
        {% block title %} {% endblock title %}
    </title>
    <link rel="icon" href="{% static '' %}tfimg/user_panel/Techforing-Icon.png" type="image/x-icon"/>
</head>

<body>
<!-- Header Start -->
<header class="sticky-top">
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm py-0">
        <div class="container-fluid d-flex justify-content-lg-around px-1 px-md-5">
            <a href="" class="d-none d-lg-block">
                <img class="mx-auto my-1 logo-lg" src="{% static '' %}tfimg/user_panel/logo.png" width="125" height="60"
             alt="Logo">
            </a>
            <a class="navbar-brand pt-2 d-lg-none" href="/">
                <img src="{% static '' %}tfimg/user_panel/logo.png" width="125" height="60" alt="Logo">
            </a>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0 d-flex align-items-center fw-bolder">
                    <li class="nav-item dropdown">
                        <a class="nav-link" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
                           aria-expanded="false">
                            {{ user }}
                            <img class="ms-2 rounded-circle" src="{{ user.profile_pic.url }}"
                                 width="40" height="40" alt="">
                        </a>
                        <ul class="dropdown-menu border-0 shadow end-0" aria-labelledby="navbarDropdown">
                            <li>
                                <a class="dropdown-item ps-3" href="{% host_url 'user_profile' %}">
                                    <i class="icofont-ui-user me-2"></i> My Profile</a>
                            </li>
                            <li>
                                <a class="dropdown-item ps-3" href="{% host_url 'user_profile' %}">
                                    <i class="icofont-edit me-2"></i> Edit Profile
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item ps-3" href="{% host_url 'logout' host 'account' %}">
                                    <i class="icofont-logout me-2"></i> Logout
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <button class="btn btn-sm px-3 btn-outline-primary mx-auto mb-5 d-block d-lg-none" type="button"
                                data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample"
                                aria-controls="offcanvasExample">
                            <i class="icofont-long-arrow-right"></i>
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>

<main class="w-100 ms-0 overflow-hidden">
    <div class="ps-2 ps-lg-3 py-3 pe-2">
        {% block content %} {% endblock content %}
    </div>
    <footer id="footer-small" class="bg-blue p-2 pt-4 p-md-5 pb-md-2">
        <div class="d-flex justify-content-center mb-4">
            <a href="" class="me-5">PRIVACY POLICY</a>
            <a href="">TERMS OF USE</a>
        </div>
        <div class="d-flex justify-content-center align-items-center">
            <a href="https://www.facebook.com/techforing/">
                <img src="{% static '' %}tfimg/user_panel/facebook.png" class="me-3" alt="">
            </a>
            <a href="https://www.linkedin.com/company/techforingltd./">
                <img src="{% static '' %}tfimg/user_panel/linkedin.png" class="me-3" alt="">
            </a>
            <a href="https://twitter.com/techforingltd?lang=en">
                <img src="{% static '' %}tfimg/user_panel/twitter.png" class="me-3" alt="">
            </a>
            <a href="https://www.instagram.com/techforingltd/">
                <img src="{% static '' %}tfimg/user_panel/Instagram.png" alt="">
            </a>
        </div>
        <div class="p-3 p-md-4 pb-2 text-center text-white ">
            <p class="pt-4 border-top border-light">Copyright &copy; 2021 Techforing Ltd.
            </p>
        </div>
    </footer>
</main>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj"
        crossorigin="anonymous"></script>
<script src="{% static '' %}tfjs/user_panel/pcs/menubar.js"></script>
<script>
    window.onload = function () {
        let logoSm = document.querySelector('.logo-sm');
        let logoLg = document.querySelector('.logo-lg');
        let expandedBtn = document.querySelector('.menu-expand-btn');
        let expanded = false;

        let hideLinkText = () => {
            logoSm.style.display = 'block';
            logoLg.style.display = 'none';
            document.querySelectorAll('.w-20 .menubar li').forEach(li => {
                li.style.paddingLeft = '6px';
                li.children[0].children[1].style.display = 'none';
                li.children[0].style.justifyContent = 'center';
            });

            if (document.getElementById('modal-spacing'))
                document.getElementById('modal-spacing').outerHTML = '';

            if (!document.getElementById('tooltip'))
                document.head.insertAdjacentHTML('beforeend', '<link id="tooltip" rel="stylesheet" href="https://npmcdn.com/tootik@1.0.2/css/tootik.min.css">')
        }
        let showLinkText = () => {
            logoSm.style.display = 'none';
            logoLg.style.display = 'block';
            document.querySelectorAll('.w-20 .menubar li').forEach(li => {
                li.style.paddingLeft = '15px';
                li.children[0].children[1].style.display = 'initial';
                li.children[0].style.justifyContent = 'flex-start';
            });
            document.head.insertAdjacentHTML('beforeend', `<style id="modal-spacing"> .modal-dialog {
                    padding-left: 18%;
                }</style>`);
            document.getElementById('tooltip').outerHTML = '';

        }

        let menubarSize = (menuWidth, contentWidth) => {
            document.querySelector('.w-20').style.width = menuWidth;
            document.querySelector('.w-80').style.width = contentWidth;
        }
        // document.querySelector('.w-20').addEventListener('mouseover', e => {
        //     if (!expanded) {
        //         expandedBtn.style.display = 'none';
        //         menubarSize('18%', '95%');
        //         showLinkText();
        //     }
        // });

        // document.querySelector('.w-20').addEventListener('mouseout', e => {
        //     if (!expanded) {
        //         expandedBtn.style.display = 'initial';
        //         menubarSize('5%', '95%');
        //         hideLinkText();
        //     }
        // });

        expandedBtn.addEventListener('click', e => {
            expanded = expanded ? false : true;
            if (expanded) {
                menubarSize('18%', '82%');
                document.querySelector('.w-80').style.marginLeft = '18%';
                expandedBtn.style.left = '280px';
                showLinkText();
            } else {
                menubarSize('5%', '95%');
                document.querySelector('.w-80').style.marginLeft = '5%';
                expandedBtn.style.left = '100px';
                hideLinkText();
            }
        });

    }

    function dropdown($bs) {
        const CLASS_NAME = 'has-child-dropdown-show';
        $bs.Dropdown.prototype.toggle = function (_orginal) {
            return function () {
                document.querySelectorAll('.' + CLASS_NAME).forEach(function (e) {
                    e.classList.remove(CLASS_NAME);
                });
                let dd = this._element.closest('.dropdown').parentNode.closest('.dropdown');
                for (; dd && dd !== document; dd = dd.parentNode.closest('.dropdown')) {
                    dd.classList.add(CLASS_NAME);
                }
                return _orginal.call(this);
            }
        }($bs.Dropdown.prototype.toggle);
        document.querySelectorAll('.dropdown').forEach(function (dd) {
            dd.addEventListener('hide.bs.dropdown', function (e) {
                if (this.classList.contains(CLASS_NAME)) {
                    this.classList.remove(CLASS_NAME);
                    e.preventDefault();
                }
                e.stopPropagation(); // do not need pop in multi level mode
            });
        });
    };
</script>
{% block customjs %} {% endblock customjs %}
</body>

</html>

</html>